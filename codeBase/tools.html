<html>
	<head>
		<title>Tools</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<script src="javascript/jquery.min.js"></script>
		<script src="javascript/bootstrap.js"></script>
		<script src="javascript/jquery.min.js"></script>

		<link rel="stylesheet" href="css/regpagestyle.css" />
	</head>

	<body>
		<div id="navigation"></div>

		<h1 align="center">Tool Rents</h1>
	<form action="php/toolSubmit.php" method="post">
    <div class="container">
			<div class="row">
				<div class="col-sm-6 col-sm-offset-3">
					<label for="ID" class="control-label">CID:</label>
					<input class="form-control" style="text-align: center; font-size: 25px;" type="text" id="ID" name="cid" />
				</div>
			</div>
		</div>


			<div class="container form-padding-custom">

								<div class="panel panel-success" id="div1">
					<div class="panel-heading">Tool</div>
					<div class="panel-body">
						<div class="row form-padding-custom">

							<div class="col-sm-2">
                <label for="y1" class="control-label">Type:</label>
                <select name="type1" class="type form-control">
                                </select>
							</div>

              <div class="col-sm-2">
                <label for="y1" class="control-label">Duration:</label>
                <input name="hours1" type="text" class="hours form-control" placeholder="Hours">
							</div>

              <div class="col-sm-2">
                <label for="y1" class="control-label">Rate:</label>
                <input type="text" class="rate form-control" placeholder="Rupees/hour for District">
							</div>
              <div class="col-sm-2 ">
								<div class="form-group">
									<label for="month" class="control-label">Sowing Month:</label>
									<select name="month1" class="form-control month-selector">
									</select>
								</div>
				</div>
              <div class="col-sm-2">
                <label for="y1" class="control-label">Net Payable:</label>
                <input name="amt1" type="text" class="amt form-control" placeholder="Rupees">
							</div>

						</div>
          </div>
        </div>


                				<div class="panel panel-success" id="div2">
					<div class="panel-heading">Tool</div>
					<div class="panel-body">
						<div class="row form-padding-custom">

							<div class="col-sm-2">
                <label for="y2" class="control-label">Type:</label>
                <select name="type2" class="type form-control">
                                </select>
							</div>

              <div class="col-sm-2">
                <label for="y2" class="control-label">Duration:</label>
                <input name="hours2" type="text" class="hours form-control" placeholder="Hours">
							</div>

              <div class="col-sm-2">
                <label for="y2" class="control-label">Rate:</label>
                <input type="text" class="rate form-control" placeholder="Rupees/hour for District">
							</div>

             <div class="col-sm-2 ">
								<div class="form-group">
									<label for="month" class="control-label">Sowing Month:</label>
									<select name="month2" class="form-control month-selector">
									</select>
								</div>
				</div>
              <div class="col-sm-2">
                <label for="y2" class="control-label">Net Payable:</label>
                <input name="amt2" type="text" class="amt form-control" placeholder="Rupees">
							</div>

						</div>
          </div>
        </div>


                				<div class="panel panel-success" id="div3">
					<div class="panel-heading">Tool</div>
					<div class="panel-body">
						<div class="row form-padding-custom">

							<div class="col-sm-2">
                <label for="y3" class="control-label">Type:</label>
                <select name="type3" class="type form-control">
                                </select>
							</div>

              <div class="col-sm-2">
                <label for="y3" class="control-label">Duration:</label>
                <input name="hours3" type="text" class="hours form-control" placeholder="Hours">
							</div>

              <div class="col-sm-2">
                <label for="y3" class="control-label">Rate:</label>
                <input type="text" class="rate form-control" placeholder="Rupees/hour for District">
							</div>

                 <div class="col-sm-2 ">
								<div class="form-group">
									<label for="month" class="control-label">Sowing Month:</label>
									<select name="month3" class="form-control month-selector">
									</select>
								</div>
				</div>
              <div class="col-sm-2">
                <label for="y3" class="control-label">Net Payable:</label>
                <input name="amt3" type="text" class="amt form-control" placeholder="Rupees">
							</div>

						</div>
          </div>
        </div>


                				<div class="panel panel-success" id="div4">
					<div class="panel-heading">Tool</div>
					<div class="panel-body">
						<div class="row form-padding-custom">

							<div class="col-sm-2">
                <label for="y4" class="control-label">Type:</label>
                <select name="type4" class="type form-control">
                                </select>
							</div>

              <div class="col-sm-2">
                <label for="y4" class="control-label">Duration:</label>
                <input name="hours4" type="text" class="hours form-control" placeholder="Hours">
							</div>

              <div class="col-sm-2">
                <label for="y4" class="control-label">Rate:</label>
                <input type="text" class="rate form-control" placeholder="Rupees/hour for District">
							</div>

                 <div class="col-sm-2 ">
								<div class="form-group">
									<label for="month" class="control-label">Sowing Month:</label>
									<select name="month4" class="form-control month-selector">
									</select>
								</div>
				</div>
              <div class="col-sm-2">
                <label for="y4" class="control-label">Net Payable:</label>
                <input name="amt4" type="text" class="amt form-control" placeholder="Rupees">
							</div>

						</div>
          </div>
        </div>


                				<div class="panel panel-success" id="div5">
					<div class="panel-heading">Tool</div>
					<div class="panel-body">
						<div class="row form-padding-custom">

							<div class="col-sm-2">
                <label for="y5" class="control-label">Type:</label>
                <select name="type5" class="type form-control">
                                </select>
							</div>

              <div class="col-sm-2">
                <label for="y5" class="control-label">Duration:</label>
                <input name="hours5" type="text" class="hours form-control" placeholder="Hours">
							</div>

              <div class="col-sm-2">
                <label for="y5" class="control-label">Rate:</label>
                <input type="text" class="rate form-control" placeholder="Rupees/hour for District">
							</div>

                 <div class="col-sm-2 ">
								<div class="form-group">
									<label for="month" class="control-label">Sowing Month:</label>
									<select name="month5" class="form-control month-selector">
									</select>
								</div>
				</div>
              <div class="col-sm-2">
                <label for="y5" class="control-label">Net Payable:</label>
                <input name="amt5" type="text" class="amt form-control" placeholder="Rupees">
							</div>

						</div>
          </div>
        </div>


        <div class="row form-padding-custom">
					<div class="col-sm-12">
						<button class="btn btn-danger" id="btn" style="float: right;">Add Tool</button>
					</div>
				</div>

				<div class="row">
					<div class="col-sm-2 col-sm-offset-5">
						<input type="button" class="form-control" value="Confirm" style="color: white; font-weight: bold; background-color:black;"/>
					</div>
				</div>

			</div><!--closing container-->
		</form>
</body>
    <script>
			$(document).ready(function(){
               var cid=GetURLParameter('cid');
				$('#ID').val(cid);
                var json;var c=1;
                $("#div2").hide();$("#div3").hide();$("#div4").hide();$("#div5").hide();
              $.ajax({
					type: 'POST',
					url: 'php/tools.php',
                    data:{
                        cid:cid
                    },
                    success:function( resJson ){
						 	json=JSON.parse(resJson);
							console.log( resJson );
                            for(var i=0; i<json['tools'].length; i++){
								$('.type.form-control').append(new Option(json['tools'][i]['name'], json['tools'][i]['toolId']));
							}
                    }
              });
             $(".type.form-control").change(function(){
                    var index=$(this).find('option:selected').index();
                   $(this).closest(".panel.panel-success").find(".hours.form-control").val(json['size']/json['tools'][index]['efficiency']);
                });
                $(".rate.form-control").blur(function(){
                    var hr= $(this).closest(".panel.panel-success").find(".hours.form-control").val();
                    var rate=$(this).val();
                    $(this).closest(".panel.panel-success").find(".amt.form-control").val(hr*rate);
                });
              $('#btn').click(function(){
                  c++;
                  $('#div'+c).show();
                  return false;
              });

			  $("#navigation").load("navigation.html");

       							$('.form-control.month-selector').append(new Option("Select Month","0"));
							$('.form-control.month-selector').append(new Option("January","01"));
							$('.form-control.month-selector').append(new Option("February","02"));
							$('.form-control.month-selector').append(new Option("March","03"));
							$('.form-control.month-selector').append(new Option("April","04"));
							$('.form-control.month-selector').append(new Option("May","05"));
							$('.form-control.month-selector').append(new Option("June","06"));
							$('.form-control.month-selector').append(new Option("July","07"));
							$('.form-control.month-selector').append(new Option("August","08"));
							$('.form-control.month-selector').append(new Option("September","09"));
							$('.form-control.month-selector').append(new Option("October","10"));
							$('.form-control.month-selector').append(new Option("November","11"));
							$('.form-control.month-selector').append(new Option("December","12"));

        $("input[type='button']").click(function(){
            $('form').append("<input type='hidden' name='num' value="+c+">");
            $('form').submit();
        });
        });
				function GetURLParameter(sParam){
					var sPageURL = window.location.search.substring(1);
	    		var sURLVariables = sPageURL.split('&');
	    		for (var i = 0; i < sURLVariables.length; i++)
	    		{
	        	var sParameterName = sURLVariables[i].split('=');
	        	if (sParameterName[0] == sParam)
	        	{
	            return sParameterName[1];
	        	}
	    		}
				}
		</script>
</html>
